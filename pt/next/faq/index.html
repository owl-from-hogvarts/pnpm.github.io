<!doctype html>
<html lang="pt" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.1">
<link rel="alternate" type="application/rss+xml" href="/pt/blog/rss.xml" title="pnpm Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/pt/blog/atom.xml" title="pnpm Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-91385296-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-91385296-1",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="pnpm" href="/pt/opensearch.xml">
<script src="https://buttons.github.io/buttons.js"></script><title data-react-helmet="true">Perguntas frequentes | pnpm</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://pnpm.io/pt/next/faq"><meta data-react-helmet="true" name="docsearch:language" content="pt"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Perguntas frequentes | pnpm"><meta data-react-helmet="true" name="description" content="Por que minha pasta node_modules usa espa√ßo se os pacotes s√£o armazenados globalmente?"><meta data-react-helmet="true" property="og:description" content="Por que minha pasta node_modules usa espa√ßo se os pacotes s√£o armazenados globalmente?"><meta data-react-helmet="true" property="og:image" content="https://pnpm.io/pt/img/ogimage.png"><meta data-react-helmet="true" name="twitter:image" content="https://pnpm.io/pt/img/ogimage.png"><link data-react-helmet="true" rel="shortcut icon" href="/pt/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://pnpm.io/pt/next/faq"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/next/faq" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/zh/next/faq" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/es/next/faq" hreflang="es"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/fr/next/faq" hreflang="fr"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/pt/next/faq" hreflang="pt"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/ru/next/faq" hreflang="ru"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/it/next/faq" hreflang="it"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/tr/next/faq" hreflang="tr"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/hu/next/faq" hreflang="hu"><link data-react-helmet="true" rel="alternate" href="https://pnpm.io/next/faq" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/pt/assets/css/styles.6d4d0b2d.css">
<link rel="preload" href="/pt/assets/js/runtime~main.35d1365a.js" as="script">
<link rel="preload" href="/pt/assets/js/main.86b51f72.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_STS1 shadow--md">Pular para o conte√∫do principal</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pt/"><img src="/pt/img/pnpm-no-name-with-frame.svg" alt="pnpm" class="themedImage_1k_V themedImage--light_xH4l navbar__logo"><img src="/pt/img/pnpm-no-name-with-frame.svg" alt="pnpm" class="themedImage_1k_V themedImage--dark_2X0f navbar__logo"><b class="navbar__title">pnpm</b></a><a class="navbar__item navbar__link" href="/pt/motivation">Documenta√ß√£o</a><a class="navbar__item navbar__link" href="/pt/blog">Blog</a><a class="navbar__item navbar__link" href="/pt/faq">Perguntas frequentes</a><a class="navbar__item navbar__link" href="/pt/benchmarks">Compara√ß√µes</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/pt/next/motivation">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/pt/next/faq">Next</a></li><li><a class="dropdown__link" href="/pt/faq">6.x</a></li><li><a class="dropdown__link" href="/pt/5.x/faq">5.x</a></li><li><a class="dropdown__link" href="/pt/4.x/faq">4.x</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Portugu√™s Brasileiro</span></span></a><ul class="dropdown__menu"><li><a href="/next/faq" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/zh/next/faq" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">‰∏≠Êñá</a></li><li><a href="/es/next/faq" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">Espa√±ol</a></li><li><a href="/fr/next/faq" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">Fran√ßais</a></li><li><a href="/pt/next/faq" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">Portugu√™s Brasileiro</a></li><li><a href="/ru/next/faq" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">–†—É—Å—Å–∫–∏–π</a></li><li><a href="/it/next/faq" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">Italiano</a></li><li><a href="/tr/next/faq" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">T√ºrk√ße</a></li><li><a href="/hu/next/faq" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">Magyar</a></li><li><a href="https://crowdin.com/project/pnpm" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help Us Translate</a></li></ul></div><a href="https://opencollective.com/pnpm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Nos apoie<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_1eEz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/pnpm/pnpm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle displayOnlyInLargeViewport_32vc react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_2Qss">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_2Qss">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_8aqC"><button type="button" class="DocSearch DocSearch-Button" aria-label="Buscar"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Buscar</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/pt/"><img src="/pt/img/pnpm-no-name-with-frame.svg" alt="pnpm" class="themedImage_1k_V themedImage--light_xH4l navbar__logo"><img src="/pt/img/pnpm-no-name-with-frame.svg" alt="pnpm" class="themedImage_1k_V themedImage--dark_2X0f navbar__logo"><b class="navbar__title">pnpm</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/pt/motivation">Documenta√ß√£o</a></li><li class="menu__list-item"><a class="menu__link" href="/pt/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/pt/faq">Perguntas frequentes</a></li><li class="menu__list-item"><a class="menu__link" href="/pt/benchmarks">Compara√ß√µes</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/pt/next/faq">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/pt/faq">6.x</a></li><li class="menu__list-item"><a class="menu__link" href="/pt/5.x/faq">5.x</a></li><li class="menu__list-item"><a class="menu__link" href="/pt/4.x/faq">4.x</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/next/faq" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/zh/next/faq" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">‰∏≠Êñá</a></li><li class="menu__list-item"><a href="/es/next/faq" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">Espa√±ol</a></li><li class="menu__list-item"><a href="/fr/next/faq" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">Fran√ßais</a></li><li class="menu__list-item"><a href="/pt/next/faq" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">Portugu√™s Brasileiro</a></li><li class="menu__list-item"><a href="/ru/next/faq" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">–†—É—Å—Å–∫–∏–π</a></li><li class="menu__list-item"><a href="/it/next/faq" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">Italiano</a></li><li class="menu__list-item"><a href="/tr/next/faq" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">T√ºrk√ße</a></li><li class="menu__list-item"><a href="/hu/next/faq" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">Magyar</a></li><li class="menu__list-item"><a href="https://crowdin.com/project/pnpm" target="_blank" rel="noopener noreferrer" class="menu__link">Help Us Translate</a></li></ul></li><li class="menu__list-item"><a href="https://opencollective.com/pnpm" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Nos apoie<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_1eEz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://github.com/pnpm/pnpm" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31CJ"><main class="docMainContainer_2m81 docMainContainerEnhanced_1Un2"><div class="container padding-top--md padding-bottom--lg docItemWrapper_3btV"><div class="row"><div class="col docItemCol_2Sgb"><div class="alert alert--warning margin-bottom--md" role="alert"><div>Esta √© uma documenta√ß√£o n√£o lan√ßada para pnpm <b>Next</b>.</div><div class="margin-top--md">Para documenta√ß√£o atualizada, veja a <b><a href="/pt/faq">√∫ltima vers√£o</a></b> (6.x).</div></div><div class="docItemContainer_1PTk"><article><span class="badge badge--secondary">Version: Next</span><div class="markdown"><header><h1 class="h1Heading_1haY">Perguntas frequentes</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2I8v" id="por-que-minha-pasta-node_modules-usa-espa√ßo-se-os-pacotes-s√£o-armazenados-globalmente"></a>Por que minha pasta <code>node_modules</code> usa espa√ßo se os pacotes s√£o armazenados globalmente?<a class="hash-link" href="#por-que-minha-pasta-node_modules-usa-espa√ßo-se-os-pacotes-s√£o-armazenados-globalmente" title="Link direto para o t√≠tulo">#</a></h2><p>pnpm cria <a href="https://en.wikipedia.org/wiki/Hard_link" target="_blank" rel="noopener noreferrer">hard links</a> do armazenamento global para a pasta <code>node_modules</code> de cada projeto. Hard links apontam para o mesmo espa√ßo no disco onde os arquivos originais est√£o. Ent√£o, por exemplo, se voc√™ tem o pacote <code>foo</code> em seu projeto como uma depend√™ncia, e ocupa 1MB de espa√ßo, ent√£o ir√° parecer que ocupa 1MB de espa√ßo na pasta <code>node_modules</code>, e 1MB de espa√ßo no armazenamento global. No entanto, esse 1MB √© <em>o mesmo espa√ßo</em> no disco, apontado de duas localiza√ß√µes diferentes. Ent√£o, no total, <code>foo</code> ocupa 1MB, n√£o 2MB.</p><p>Para mais sobre este assunto:</p><ul><li><a href="https://unix.stackexchange.com/questions/88423/why-do-hard-links-seem-to-take-the-same-space-as-the-originals" target="_blank" rel="noopener noreferrer">Porque os hard links parecem ocupar o mesmo espa√ßo que os originais?</a></li><li><a href="https://gist.github.com/zkochan/106cfef49f8476b753a9cbbf9c65aff1" target="_blank" rel="noopener noreferrer">Uma thread da sala de bate-papo do pnpm</a></li><li><a href="https://github.com/pnpm/pnpm/issues/794" target="_blank" rel="noopener noreferrer">Uma issue no reposit√≥rio do pnpm</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2I8v" id="ele-funciona-no-windows"></a>Ele funciona no Windows?<a class="hash-link" href="#ele-funciona-no-windows" title="Link direto para o t√≠tulo">#</a></h2><p>Resposta curta: Sim Resposta longa: Utilizar links simb√≥licos no Windows √© no m√≠nimo problem√°tico, mas pnpm tem uma alternativa. Para Windows, n√≥s usamos <a href="https://docs.microsoft.com/en-us/windows/win32/fileio/hard-links-and-junctions" target="_blank" rel="noopener noreferrer">jun√ß√µes</a> em vez disso.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2I8v" id="mas-a-abordagem-aninhada-do-node_modules-√©-incompat√≠vel-com-windows"></a>Mas a abordagem aninhada do <code>node_modules</code> √© incompat√≠vel com Windows?<a class="hash-link" href="#mas-a-abordagem-aninhada-do-node_modules-√©-incompat√≠vel-com-windows" title="Link direto para o t√≠tulo">#</a></h2><p>As primeiras vers√µes do npm apresentavam problemas devido ao aninhamento de todos os <code>node_modules</code> (veja <a href="https://github.com/nodejs/node-v0.x-archive/issues/6960" target="_blank" rel="noopener noreferrer">essa issue</a>). No entanto, pnpm n√£o cria pastas profundas, ele armazena todos os pacotes de forma plana e utiliza links simb√≥licos para criar a estrutura de depend√™ncias.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2I8v" id="e-quanto-aos-links-simb√≥licos-circulares"></a>E quanto aos links simb√≥licos circulares?<a class="hash-link" href="#e-quanto-aos-links-simb√≥licos-circulares" title="Link direto para o t√≠tulo">#</a></h2><p>Embora o pnpm use links para colocar depend√™ncias dentro das pastas <code>node_modules</code>, symlinks circulares s√£o evitados porque os pacotes-pai s√£o colocados na mesma pasta <code>node_modules</code> em que est√£o suas depend√™ncias. Portanto, as depend√™ncias de <code>foo</code> n√£o est√£o em <code>foo/node_modules</code>, mas <code>foo</code> est√° em <code>node_modules</code>, junto com suas pr√≥prias depend√™ncias.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2I8v" id="por-que-usar-hard-links-por-que-n√£o-criar-um-link-simb√≥lico-direto-para-o-armazenamento-global"></a>Por que usar hard links? Por que n√£o criar um link simb√≥lico direto para o armazenamento global?<a class="hash-link" href="#por-que-usar-hard-links-por-que-n√£o-criar-um-link-simb√≥lico-direto-para-o-armazenamento-global" title="Link direto para o t√≠tulo">#</a></h2><p>Um pacote pode ter diferentes conjuntos de depend√™ncias numa mesma m√°quina.</p><p>No projeto <strong>A</strong>, <code>foo@1.0.0</code> pode depender de <code>bar@1.0.0</code>, mas no projeto <strong>B</strong>, a mesma dependencia <code>foo</code> pode depender de <code>bar@1.1.0</code>; ent√£o, pnpm liga <code>foo@1.0.0</code> para todos os projetos que o usam, a fim de criar diferentes conjuntos de depend√™ncias em cada um deles.</p><p>Direct symlinking to the global store would work with Node&#x27;s <code>--preserve-symlinks</code> flag, however, that approach comes with a plethora of its own issues, so we decided to stick with hard links. For more details about why this decision was made, see <a href="https://github.com/nodejs/node-eps/issues/46" target="_blank" rel="noopener noreferrer">this issue</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2I8v" id="does-pnpm-work-across-multiple-drives-or-filesystems"></a>Does pnpm work across multiple drives or filesystems?<a class="hash-link" href="#does-pnpm-work-across-multiple-drives-or-filesystems" title="Link direto para o t√≠tulo">#</a></h2><p>The package store should be on the same drive and filesystem as installations, otherwise packages will be copied, not linked. This is due to a limitation in how hard linking works, in that a file on one filesystem cannot address a location in another. See <a href="https://github.com/pnpm/pnpm/issues/712" target="_blank" rel="noopener noreferrer">Issue #712</a> for more details.</p><p>pnpm functions differently in the 2 cases below:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2I8v" id="store-path-is-specified"></a>Store path is specified<a class="hash-link" href="#store-path-is-specified" title="Link direto para o t√≠tulo">#</a></h3><p>If the store path is specified via <a href="/pt/next/configuring">the store config</a>, then copying occurs between the store and any projects that are on a different disk.</p><p>If you run <code>pnpm install</code> on disk <code>A</code>, then the pnpm store must be on disk <code>A</code>. If the pnpm store is located on disk <code>B</code>, then all required packages will be directly copied to the project location instead of being linked. This severely inhibits the storage and performance benefits of pnpm.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2I8v" id="store-path-is-not-specified"></a>Store path is NOT specified<a class="hash-link" href="#store-path-is-not-specified" title="Link direto para o t√≠tulo">#</a></h3><p>If the store path is not set, then multiple stores are created (one per drive or filesystem).</p><p>If installation is run on disk <code>A</code>, the store will be created on <code>A</code> <code>.pnpm-store</code> under the filesystem root.  If later the installation is run on disk <code>B</code>, an independent store will be created on <code>B</code> at <code>.pnpm-store</code>. The projects would still maintain the benefits of pnpm, but each drive may have redundant packages.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2I8v" id="what-does-pnpm-store-prune-do-is-it-harmful"></a>What does <code>pnpm store prune</code> do? Is it harmful?<a class="hash-link" href="#what-does-pnpm-store-prune-do-is-it-harmful" title="Link direto para o t√≠tulo">#</a></h2><p>The command <code>pnpm store prune</code> removes <em>unreferenced packages</em>.</p><p>Unreferenced packages are packages that are not used by any projects on the system. Packages can become unreferenced after most installation operations, for instance when dependencies are made redundant.</p><p>For example, during <code>pnpm install</code>, package <code>foo@1.0.0</code> is updated to <code>foo@1.0.1</code>. pnpm will keep <code>foo@1.0.0</code> in the store, as it does not automatically remove packages. If package <code>foo@1.0.0</code> is not used by any other project on the system, it becomes unreferenced. Running <code>pnpm store prune</code> would remove <code>foo@1.0.0</code> from the store.</p><p>Running <code>pnpm store prune</code> is not harmful and has no side effects on your projects. If future installations require removed packages, pnpm will download them again.</p><p>It is best practice to run <code>pnpm store prune</code> occasionally to clean up the store, but not too frequently. Sometimes, unreferenced packages become required again. This could occur when switching branches and installing older dependencies, in which case pnpm would need to re-download all removed packages, briefly slowing down the installation process.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2I8v" id="what-does-pnpm-stand-for"></a>What does <code>pnpm</code> stand for?<a class="hash-link" href="#what-does-pnpm-stand-for" title="Link direto para o t√≠tulo">#</a></h2><p><code>pnpm</code> stands for <code>performant npm</code>. <a href="https://github.com/rstacruz/" target="_blank" rel="noopener noreferrer">Rico Sta. Cruz</a> came up with the name.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2I8v" id="pnpm-does-not-work-with-your-project-here"></a><code>pnpm</code> does not work with &lt;YOUR-PROJECT-HERE&gt;?<a class="hash-link" href="#pnpm-does-not-work-with-your-project-here" title="Link direto para o t√≠tulo">#</a></h2><p>In most cases it means that one of the dependencies require packages not declared in <code>package.json</code>. It is a common mistake caused by flat <code>node_modules</code>. If this happens, this is an error in the dependency and the dependency should be fixed. That might take time though, so pnpm supports workarounds to make the buggy packages work.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2I8v" id="solution-1"></a>Solution 1<a class="hash-link" href="#solution-1" title="Link direto para o t√≠tulo">#</a></h3><p>In the following example, a dependency does <strong>not</strong> have the <code>iterall</code> module in its own list of deps.</p><p>The easiest solution to resolve missing dependencies of the buggy packages is to <strong>add <code>iterall</code> as a dependency to our project&#x27;s <code>package.json</code></strong>.</p><p>You can do so, by installing it via <code>pnpm add iterall</code>, and will be automatically added to your project&#x27;s <code>package.json</code>.</p><div class="codeBlockContainer_PJ6i"><div class="codeBlockContent_1Tqj json"><pre tabindex="0" class="prism-code language-json codeBlock_1Vp6 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_31iz"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;dependencies&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;iterall&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;^1.2.2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copiar para a √°rea de transfer√™ncia" class="copyButton_1abQ clean-btn">Copiar</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2I8v" id="solution-2"></a>Solution 2<a class="hash-link" href="#solution-2" title="Link direto para o t√≠tulo">#</a></h3><p>One of the solutions is to use <a href="/pt/next/pnpmfile#hooks">hooks</a> for adding the missing dependencies to the package&#x27;s <code>package.json</code>.</p><p>An example was <a href="https://github.com/pnpm/pnpm/issues/1043" target="_blank" rel="noopener noreferrer">Webpack Dashboard</a> which wasn&#x27;t working with <code>pnpm</code>. It has since been resolved such that it works with <code>pnpm</code> now.</p><p>It used to throw an error:</p><div class="codeBlockContainer_PJ6i"><div class="codeBlockContent_1Tqj console"><pre tabindex="0" class="prism-code language-console codeBlock_1Vp6 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_31iz"><span class="token-line" style="color:#393A34"><span class="token plain">Error: Cannot find module &#x27;babel-traverse&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  at /node_modules/inspectpack@2.2.3/node_modules/inspectpack/lib/actions/parse</span></span></code></pre><button type="button" aria-label="Copiar para a √°rea de transfer√™ncia" class="copyButton_1abQ clean-btn">Copiar</button></div></div><p>The problem was that <code>babel-traverse</code> was used in <code>inspectpack</code> which was used by <code>webpack-dashboard</code>, but <code>babel-traverse</code> wasn&#x27;t specified in <code>inspectpack</code>&#x27;s <code>package.json</code>. It still worked with <code>npm</code> and <code>yarn</code> because they create flat <code>node_modules</code>.</p><p>The solution was to create a <code>.pnpmfile.cjs</code> with the following contents:</p><div class="codeBlockContainer_PJ6i"><div class="codeBlockContent_1Tqj js"><pre tabindex="0" class="prism-code language-js codeBlock_1Vp6 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_31iz"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  hooks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">readPackage</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">pkg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pkg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;inspectpack&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        pkg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dependencies</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;babel-traverse&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;^6.26.0&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> pkg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copiar para a √°rea de transfer√™ncia" class="copyButton_1abQ clean-btn">Copiar</button></div></div><p>After creating a <code>.pnpmfile.cjs</code>, delete <code>pnpm-lock.yaml</code> only - there is no need to delete <code>node_modules</code>, as pnpm hooks only effect module resolution. Then, rebuild the dependencies &amp; it should be working.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2I8v" id="solution-3"></a>Solution 3<a class="hash-link" href="#solution-3" title="Link direto para o t√≠tulo">#</a></h3><p>In case there are too many issues, you can use the <code>shamefully-hoist</code> option. This creates a flat <code>node_modules</code> structure similar to the one created by <code>npm</code> or <code>yarn</code>, which is not recommended as avoiding this structure is the primary purpose of pnpm&#x27;s <code>node_modules</code> approach.</p><p>To use it, try <code>pnpm install --shamefully-hoist</code>.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://crowdin.com/project/pnpm/pt" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_11EM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Editar essa p√°gina</a></div><div class="col lastUpdated_1OQG"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Navega√ß√£o das p√°ginas da documenta√ß√£o"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_252H thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#por-que-minha-pasta-node_modules-usa-espa√ßo-se-os-pacotes-s√£o-armazenados-globalmente" class="table-of-contents__link">Por que minha pasta <code>node_modules</code> usa espa√ßo se os pacotes s√£o armazenados globalmente?</a></li><li><a href="#ele-funciona-no-windows" class="table-of-contents__link">Ele funciona no Windows?</a></li><li><a href="#mas-a-abordagem-aninhada-do-node_modules-√©-incompat√≠vel-com-windows" class="table-of-contents__link">Mas a abordagem aninhada do <code>node_modules</code> √© incompat√≠vel com Windows?</a></li><li><a href="#e-quanto-aos-links-simb√≥licos-circulares" class="table-of-contents__link">E quanto aos links simb√≥licos circulares?</a></li><li><a href="#por-que-usar-hard-links-por-que-n√£o-criar-um-link-simb√≥lico-direto-para-o-armazenamento-global" class="table-of-contents__link">Por que usar hard links? Por que n√£o criar um link simb√≥lico direto para o armazenamento global?</a></li><li><a href="#does-pnpm-work-across-multiple-drives-or-filesystems" class="table-of-contents__link">Does pnpm work across multiple drives or filesystems?</a><ul><li><a href="#store-path-is-specified" class="table-of-contents__link">Store path is specified</a></li><li><a href="#store-path-is-not-specified" class="table-of-contents__link">Store path is NOT specified</a></li></ul></li><li><a href="#what-does-pnpm-store-prune-do-is-it-harmful" class="table-of-contents__link">What does <code>pnpm store prune</code> do? Is it harmful?</a></li><li><a href="#what-does-pnpm-stand-for" class="table-of-contents__link">What does <code>pnpm</code> stand for?</a></li><li><a href="#pnpm-does-not-work-with-your-project-here" class="table-of-contents__link"><code>pnpm</code> does not work with &lt;YOUR-PROJECT-HERE&gt;?</a><ul><li><a href="#solution-1" class="table-of-contents__link">Solution 1</a></li><li><a href="#solution-2" class="table-of-contents__link">Solution 2</a></li><li><a href="#solution-3" class="table-of-contents__link">Solution 3</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documenta√ß√£o</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/pt/installation">Primeiros Passos</a></li><li class="footer__item"><a class="footer__link-item" href="/pt/pnpm-cli">pnpm CLI</a></li><li class="footer__item"><a class="footer__link-item" href="/pt/workspaces">√Årea de Trabalho</a></li><li class="footer__item"><a class="footer__link-item" href="/pt/npmrc">.npmrc</a></li></ul></div><div class="col footer__col"><div class="footer__title">Comunidade</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/pt/users">Mostru√°rio</a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/pnpm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://r.pnpm.io/chat" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chat do projeto</a></li><li class="footer__item"><a href="https://twitter.com/pnpmjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><div class="footer__title">Contribuindo</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/pnpm/pnpm" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://opencollective.com/pnpm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Nos apoie</a></li><li class="footer__item"><a href="https://crowdin.com/project/pnpm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Nos ajude a traduzir</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/pt/img/pnpm-light.svg" alt="" class="themedImage_1k_V themedImage--light_xH4l footer__logo"><img src="/pt/img/pnpm-light.svg" alt="" class="themedImage_1k_V themedImage--dark_2X0f footer__logo"></div><div class="footer__copyright">Copyright ¬© 2015-2021 contribuidores do pnpm</div></div></div></footer></div>
<script src="/pt/assets/js/runtime~main.35d1365a.js"></script>
<script src="/pt/assets/js/main.86b51f72.js"></script>
</body>
</html>